/* NADEEM Messenger Chatbot Language: Node.js (JavaScript) Library: facebook-chat-api (unofficial) ‚Äî for group-chat features (members added, group welcome, emojis)

IMPORTANT:

This script uses a user-account based approach (facebook-chat-api) so it logs in with a Facebook account (email & password) or appstate. This is different from official Page Webhooks.

Keep credentials private. For production prefer appstate file to avoid storing password.


Features implemented (as requested):

Bot name: NADEEM.AI.BOT (owner Name stored in config)

Requires commands to start with / ‚Äî otherwise ignored

Hourly time announcement to registered groups (configurable)

Welcome message when new member is added to a group, shows their name and which member number they are in the group

Full emoji support (unicode emoji in messages)

Admin UID (ADMIN_UID) and owner name stored in config

A support link is included in the welcome/help header

Simple AI-like replies for questions (uses a small local Q/A map; you can extend it or hook to an external AI API)

Persisted list of registered groups for time announcements: groups.json


USAGE EXAMPLES (see bottom for commands list):

Send: /help -> Bot replies with list of commands

Send: /time -> Bot replies current time

Send: /register (in group) -> Bot registers this group to receive hourly time messages

Send: /unregister (in group) -> Stop hourly messages for that group

Any message not starting with / will be ignored


SETUP & RUN

1. npm init -y


2. npm install facebook-chat-api moment fs-extra


3. Save this file as nadeem_bot.js


4. Set env or fill credentials in login() invocation (recommended: use appstate.json and load it)


5. node nadeem_bot.js



Note: facebook-chat-api may require additional setup (2FA, checkpoint) depending on the account.


---

CONFIG / CODE START

*/

const login = require('facebook-chat-api'); const fs = require('fs-extra'); const path = require('path'); const moment = require('moment');

// ---------- CONFIG ---------- const CONFIG = { OWNER_NAME: 'NADEEM', BOT_NAME: 'NADEEM.AI.BOT', ADMIN_UID: '61552637532706', // user's provided admin UID SUPPORT_LINK: 'https://www.facebook.com/share/17QR65nbyH/', GROUPS_FILE: path.join(__dirname, 'groups.json'), // local Q/A fallback (extend or replace with real AI integration) QA: { 'who are you': '‡¶Ü‡¶Æ‡¶ø NADEEM.AI.BOT ‚Äî ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡ßá‡¶∏‡ßá‡¶û‡ßç‡¶ú‡¶æ‡¶∞ ‡¶∏‡¶π‡¶ï‡¶æ‡¶∞‡ßÄ‡•§ /help ‡¶≤‡¶ø‡¶ñ‡ßá ‡¶ï‡¶Æ‡¶æ‡¶®‡ßç‡¶° ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®‡•§', 'hello': '‡¶π‡¶æ‡¶á! ‡¶ï‡ßá‡¶Æ‡¶® ‡¶Ü‡¶õ‡ßá‡¶®? üòä', 'hi': '‡¶π‡¶æ‡¶á! üòä', } };

// Ensure groups file exists if (!fs.existsSync(CONFIG.GROUPS_FILE)) { fs.writeJsonSync(CONFIG.GROUPS_FILE, { groups: [] }, { spaces: 2 }); }

let groupsDb = fs.readJsonSync(CONFIG.GROUPS_FILE);

// ---------- LOGIN ---------- // Two options: (A) provide email & password (not recommended), (B) use appState JSON saved earlier. // Replace the object below with {email: 'YOUR_EMAIL', password: 'YOUR_PASS'} or with {appState: require('./appstate.json')}

const CREDENTIALS = { /* example: email: 'you@mail.com', password: 'yourpass' */ };

login(CREDENTIALS, (err, api) => { if (err) return console.error('Login error:', err);

api.setOptions({ listenEvents: true, selfListen: false }); console.log(${CONFIG.BOT_NAME} ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶π‡¶≤‡ßã‡•§ Owner: ${CONFIG.OWNER_NAME});

// Listen for messages and events api.listen((err, message) => { if (err) return console.error('Listen error:', err);

// Some events (like members added) arrive as type 'event' and have logMessageType
if (message.type === 'message') {
  handleMessage(api, message);
} else if (message.type === 'event') {
  handleEvent(api, message);
}

});

// Hourly announcement loop: send time to registered groups every hour on the hour startHourlyAnnouncements(api); });

// ---------- HANDLERS ----------

async function handleMessage(api, message) { try { if (!message.body) return; // ignore empty messages

// Only respond to messages that begin with '/'
const body = message.body.trim();
if (!body.startsWith('/')) return;

const args = body.slice(1).trim().split(/\s+/);
const command = args.shift().toLowerCase();

const threadID = message.threadID;
const senderID = message.senderID;

switch (command) {
  case 'help':
    await sendHelp(api, threadID);
    break;

  case 'time':
    await sendTime(api, threadID);
    break;

  case 'register':
    await registerGroup(api, threadID);
    break;

  case 'unregister':
    await unregisterGroup(api, threadID);
    break;

  case 'owner':
    await api.sendMessage(`Owner Name: ${CONFIG.OWNER_NAME}\nAdmin UID: ${CONFIG.ADMIN_UID}\nSupport: ${CONFIG.SUPPORT_LINK}`, threadID);
    break;

  case 'ask':
    // Example: /ask how are you
    const q = args.join(' ').toLowerCase();
    await handleQA(api, threadID, q);
    break;

  default:
    // Unknown command: try QA fallback
    const unknown = command + (args.length ? ' ' + args.join(' ') : '');
    await handleQA(api, threadID, unknown);
    break;
}

} catch (e) { console.error('handleMessage error:', e); } }

async function handleEvent(api, event) { // Example: log:subscribe (someone added) try { if (!event.logMessageType) return;

if (event.logMessageType === 'log:subscribe') {
  // event.logMessageData added participants
  const added = event.logMessageData && event.logMessageData.addedParticipants;
  if (added && added.length) {
    const threadID = event.threadID;
    const threadInfo = await getThreadInfoAsync(api, threadID);
    const participants = threadInfo.participantIDs || [];
    for (const p of added) {
      const name = p.name || p.userFbId || JSON.stringify(p);
      const memberNumber = participants.length; // approximate
      const welcomeText = `Welcome ${name} üéâ\n‡¶Ü‡¶™‡¶®‡¶ø ‡¶è‡¶á ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™‡ßá‡¶∞ ${memberNumber} ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶∏‡¶¶‡¶∏‡ßç‡¶Ø‡•§\n‡¶ó‡ßç‡¶∞‡ßÅ‡¶™‡ßá ‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ!`;
      api.sendMessage(welcomeText, threadID);
    }
  }
}

} catch (e) { console.error('handleEvent error:', e); } }

// ---------- COMMAND IMPLEMENTATIONS ----------

async function sendHelp(api, threadID) { const helpText = üìò *NADEEM.AI.BOT ‡¶ï‡¶Æ‡¶æ‡¶®‡ßç‡¶° ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ*\n\n + /help - ‡¶è‡¶á ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø ‡¶™‡ßá‡¶ú\n + /time - ‡¶è‡¶ñ‡¶®‡¶ï‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá\n + /register - ‡¶è‡¶á ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™‡ßá ‡¶è‡¶ï ‡¶ò‡¶®‡ßç‡¶ü‡¶æ‡ßü ‡¶è‡¶ï‡¶¨‡¶æ‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶™‡¶æ‡¶†‡¶æ‡¶§‡ßá ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™ ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®\n + /unregister - ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®\n + /owner - ‡¶¨‡¶ü ‡¶Æ‡¶æ‡¶≤‡¶ø‡¶ï‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá\n + /ask <‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®> - ‡¶¨‡¶ü‡¶ï‡ßá ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® (‡¶∏‡¶π‡¶ú ‡¶ï‡¶ø‡¶â‡¶è ‡¶´‡¶≤‡ßã‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï)\n\n + üõ† ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶≤‡ßá: ${CONFIG.SUPPORT_LINK}\n + Admin UID: ${CONFIG.ADMIN_UID};

await api.sendMessage(helpText, threadID); }

async function sendTime(api, threadID) { const now = moment().format('YYYY-MM-DD HH:mm:ss'); await api.sendMessage(üïí ‡¶è‡¶ñ‡¶®‡¶ï‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü: ${now}, threadID); }

async function registerGroup(api, threadID) { if (groupsDb.groups.includes(threadID)) { await api.sendMessage('‡¶è‡¶á ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™‡¶ü‡¶ø ‡¶á‡¶§‡¶ø‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶Ü‡¶õ‡ßá‡•§ ‚úÖ', threadID); return; } groupsDb.groups.push(threadID); fs.writeJsonSync(CONFIG.GROUPS_FILE, groupsDb, { spaces: 2 }); await api.sendMessage('‡¶ó‡ßç‡¶∞‡ßÅ‡¶™‡¶ü‡¶ø ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã ‚Äî ‡¶è‡¶ñ‡¶® ‡¶•‡ßá‡¶ï‡ßá ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶ò‡¶®‡ßç‡¶ü‡¶æ‡ßü ‡¶∏‡¶Æ‡ßü ‡¶™‡¶æ‡¶¨‡ßá‡¶®‡•§ ‚è∞', threadID); }

async function unregisterGroup(api, threadID) { if (!groupsDb.groups.includes(threadID)) { await api.sendMessage('‡¶è‡¶á ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™‡¶ü‡¶ø ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶õ‡¶ø‡¶≤ ‡¶®‡¶æ‡•§', threadID); return; } groupsDb.groups = groupsDb.groups.filter(g => g !== threadID); fs.writeJsonSync(CONFIG.GROUPS_FILE, groupsDb, { spaces: 2 }); await api.sendMessage('‡¶ó‡ßç‡¶∞‡ßÅ‡¶™‡¶ü‡¶ø‡¶∞ ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§', threadID); }

async function handleQA(api, threadID, q) { if (!q) { await api.sendMessage('‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡ßã‡¶® ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶ï‡¶∞‡¶õ‡ßá‡¶®? /ask ‡¶≤‡¶ø‡¶ñ‡ßá ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶¶‡¶ø‡¶®‡•§', threadID); return; } // simple matching const lower = q.toLowerCase(); for (const k of Object.keys(CONFIG.QA)) { if (lower.includes(k)) { await api.sendMessage(CONFIG.QA[k], threadID); return; } }

// Default fallback await api.sendMessage('‡¶¶‡ßÅ‡¶É‡¶ñ‡¶ø‡¶§, ‡¶Ü‡¶Æ‡¶ø ‡¶∏‡ßá‡¶ü‡¶æ ‡¶¨‡ßÅ‡¶ù‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶ø‡¶®‡¶ø‡•§ /help ‡¶≤‡¶ø‡¶ñ‡ßá ‡¶ï‡¶Æ‡¶æ‡¶®‡ßç‡¶° ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® ‡¶¨‡¶æ /ask ‡¶¶‡¶ø‡ßü‡ßá ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§', threadID); }

// ---------- UTILITIES ----------

function startHourlyAnnouncements(api) { // compute ms until next hour const now = new Date(); const msToNextHour = (60 - now.getMinutes()) * 60 * 1000 - now.getSeconds() * 1000 - now.getMilliseconds();

// set timeout to align on the hour, then interval every hour setTimeout(() => { sendTimeToAll(api); setInterval(() => sendTimeToAll(api), 60 * 60 * 1000); }, msToNextHour); }

async function sendTimeToAll(api) { groupsDb = fs.readJsonSync(CONFIG.GROUPS_FILE); if (!groupsDb.groups || !groupsDb.groups.length) return;

const now = moment().format('YYYY-MM-DD HH:mm:ss'); for (const threadID of groupsDb.groups) { try { await api.sendMessage(‚è∞ ‡¶ò‡¶®‡ßç‡¶ü‡¶æ‡¶¨‡ßç‡¶Ø‡¶æ‡¶™‡ßÄ ‡¶∏‡¶Æ‡ßü: ${now}, threadID); } catch (e) { console.error('Failed to send time to', threadID, e); } } }

function getThreadInfoAsync(api, threadID) { return new Promise((resolve, reject) => { api.getThreadInfo(threadID, (err, info) => { if (err) return reject(err); resolve(info); }); }); }

/* COMMAND EXAMPLES (use these in any chat where the bot is present):

1. /help


2. /time


3. /register  (in a group) -> adds to hourly announcement list


4. /unregister


5. /owner


6. /ask how are you?



NOTES & LIMITATIONS:

The bot replies only when messages start with /. This is by design.

For full AI replies, connect to an external AI API (OpenAI, etc.) inside handleQA.

The facebook-chat-api is unofficial. Using it may trigger security checks. For a Page-based bot (official), build a Facebook App + Page Access Token + webhook ‚Äì but group events and direct personal-group behaviors are limited there.


*/
